(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[778],{36708:function(s,e,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/submission/[id]",function(){return i(69232)}])},99977:function(s,e){"use strict";e.Z={src:"/_next/static/media/user.86c070f9.svg",height:50,width:50,blurWidth:0,blurHeight:0}},78316:function(s,e,i){"use strict";i.d(e,{Z:function(){return n}});var a=i(85893);i(67294);var l=i(99977);function n(s){if(s.id){var e="https://gravatar.com/avatar/{id}?s=400&d=robohash&r=r".replace("{id}",s.id);return(0,a.jsx)("img",{src:e,alt:"Profile image"})}return(0,a.jsx)("img",{src:l.Z,alt:"Profile image"})}},69232:function(s,e,i){"use strict";i.r(e),i.d(e,{default:function(){return y}});var a=i(85893),l=i(11163),n=i(47568),t=i(828),r=i(20414),c=i(96584),o=i(67294),d=i(67814),u=i(59417);function m(s){return"failed"===s.submission.status?(0,a.jsx)("div",{className:"submission-settings code-console break-text-normal",children:(0,a.jsx)("div",{className:"text-red-500",children:(0,a.jsx)("pre",{className:"code",children:s.submission.evaluationError})})}):"processing"===s.submission.status?(0,a.jsx)("div",{className:"submission-settings code-console",children:(0,a.jsx)("pre",{className:"code",children:"Submission is still processing"})}):void 0==s.submission.evaluationResult?(0,a.jsx)("div",{className:"submission-settings code-console",children:(0,a.jsx)("div",{className:"text-red-500",children:(0,a.jsx)("pre",{className:"code",children:"Error retrieving result"})})}):(0,a.jsxs)("div",{className:"submission-settings code-console",id:"submission-settings",children:[(0,a.jsxs)("div",{className:"buttons",children:[(0,a.jsx)("button",{className:"btn-select-all",onClick:function(s){var e=document.querySelector("#submission-settings > .code");if(e){if(window.getSelection){var i=window.getSelection(),a=document.createRange();a.selectNodeContents(e),i&&(i.removeAllRanges(),i.addRange(a))}s.stopPropagation()}},title:"Select All",children:(0,a.jsx)(d.G,{icon:u.tU8})}),(0,a.jsx)("button",{className:"btn-copy",onClick:function(){var s=document.querySelector("#submission-settings .code");s&&navigator.clipboard.writeText(s.textContent||"")},title:"Copy to Clipboard",children:(0,a.jsx)(d.G,{icon:u.Yjj})})]}),(0,a.jsx)("pre",{className:"code",children:JSON.stringify(s.submission.evaluationResult.stats,null,2)})]})}var v=i(36305),h=i(38782),x=i.n(h);function f(s){var e,i=(0,t.Z)((0,o.useState)([]),2),l=i[0],m=i[1],h=(e=(0,n.Z)(function(s){var e,i,a,l,n,t,o,d,u,h,x,f,j,N,p,g;return(0,r.__generator)(this,function(r){e=new Map,i=Object.keys(s).filter(function(e){return s[e]>0}),a=!0,l=!1,n=void 0;try{for(t=(0,v.Z)(c.iL).reverse()[Symbol.iterator]();!(a=(o=t.next()).done);a=!0){d=o.value,u=!0,h=!1,x=void 0;try{for(f=i[Symbol.iterator]();!(u=(j=f.next()).done);u=!0)(N=j.value)==d.name&&(p={Config:d,Level:s[N],Image:"/images/badges/".concat(d.image,"_").concat(s[N]-1,".png")},e.set(d.name,p))}catch(s){h=!0,x=s}finally{try{u||null==f.return||f.return()}finally{if(h)throw x}}}}catch(s){l=!0,n=s}finally{try{a||null==t.return||t.return()}finally{if(l)throw n}}return(g=Array.from(e.values())).sort(function(s,e){return s.Level-e.Level}),m(g),[2]})}),function(s){return e.apply(this,arguments)});return(0,o.useEffect)(function(){if(s.submission){var e,i;(null===(e=s.submission.evaluationResult)||void 0===e?void 0:e.achievements)&&h(null===(i=s.submission.evaluationResult)||void 0===i?void 0:i.achievements)}},[]),(0,a.jsx)("div",{className:"submission-achievement-list",children:l.map(function(s,e){return(0,a.jsxs)("div",{className:"s-badge",title:s.Config.name,children:[(0,a.jsx)(x(),{src:s.Image,className:"w-20 h-20",height:120,width:120,alt:s.Config.description}),(0,a.jsx)("span",{className:"s-badge-title",children:s.Config.name}),(0,a.jsx)(d.G,{className:"s-badge-info-icon",icon:u.sqG}),(0,a.jsxs)("div",{className:"s-badge-info",children:[(0,a.jsx)(x(),{src:s.Image,className:"w-30 h-30",height:120,width:120,alt:s.Config.description}),(0,a.jsxs)("div",{className:"s-badge-info-title",children:[(0,a.jsx)(d.G,{icon:u.Tab}),(0,a.jsx)("span",{children:s.Config.name}),(0,a.jsx)(d.G,{icon:u.Tab})]}),(0,a.jsx)("div",{className:"s-badge-info-text",children:s.Config.description}),(0,a.jsxs)("div",{className:"s-badge-info-level",children:["Tier: ",s.Config.tiers[s.Level-1]]})]})]},e)})})}var j=i(12843),N=i(78316);function p(s){return(0,a.jsx)("iframe",{className:"col-12 aspect-video",src:"https://www.youtube.com/embed/".concat(s.id),allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}var g={src:"/_next/static/media/submission.47197550.png",height:1080,width:1920,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAMAAABPT11nAAAADFBMVEUKCg8aGh8RERZgYGV584fKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIElEQVR4nDWHsQ0AAAiDoP7/s1EjC0AOSNQAK0t2J54GBOQAK/pLHQkAAAAASUVORK5CYII=",blurWidth:8,blurHeight:5},b={superWide:{src:"/_next/static/media/submission.f3bed0ac.png",height:1080,width:2560,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAAD1BMVEUUFBkdHSIMDBFhYWZAQEX+MZjxAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAHUlEQVR4nBXHwQ0AIADEIHq6/8xGfkBslDn9b24PAQYAGH6NuQYAAAAASUVORK5CYII=",blurWidth:8,blurHeight:3},hd:g,tablet:g,mobile:g};function _(s){var e,i,l,n,t,r,o,d,u,m,v,h,x,f,N,p,g,b,_,A=j.Z.getSubmissionStatus(s.submission.status);return(0,a.jsxs)("div",{className:"row",children:[(0,a.jsxs)("div",{className:"col-12 col-xl-6",children:[(0,a.jsxs)("h5",{className:"headline",children:["Submission Details",(0,a.jsx)("span",{className:"line"})]}),(0,a.jsx)("div",{className:"row",children:(0,a.jsx)("div",{className:"col-12",children:(0,a.jsx)("div",{className:"player-info-details-console",children:(0,a.jsxs)("div",{className:"row",children:[(0,a.jsx)("div",{className:"col-12",children:(0,a.jsxs)("div",{className:"player-info-details__item",children:[(0,a.jsx)("h6",{className:"player-info-details__title",children:"Battle name:"}),(0,a.jsx)("div",{className:"player-info-details__value",children:s.profile.username})]})}),(0,a.jsx)("div",{className:"col-12",children:(0,a.jsxs)("div",{className:"player-info-details__item",children:[(0,a.jsx)("h6",{className:"player-info-details__title",children:"Submission ID:"}),(0,a.jsx)("div",{className:"player-info-details__value",children:s.submission.id})]})}),(0,a.jsx)("div",{className:"col-12",children:(0,a.jsxs)("div",{className:"player-info-details__item",children:[(0,a.jsx)("h6",{className:"player-info-details__title",children:"Created:"}),(0,a.jsx)("div",{className:"player-info-details__value",children:s.submission.created.toLocaleString()})]})}),(0,a.jsx)("div",{className:"col-12",children:(0,a.jsxs)("div",{className:"player-info-details__item",children:[(0,a.jsx)("h6",{className:"player-info-details__title",children:"Game:"}),(0,a.jsxs)("div",{className:"player-info-details__value",children:[(null===(e=s.game)||void 0===e?void 0:e.name)&&(null===(i=s.game)||void 0===i?void 0:i.name)+"("+(null===(l=s.game)||void 0===l?void 0:l.id)+")"," "]})]})}),(0,a.jsx)("div",{className:"col-12",children:(0,a.jsxs)("div",{className:"player-info-details__item",children:[(0,a.jsx)("h6",{className:"player-info-details__title",children:"Mode:"}),(0,a.jsx)("div",{className:"player-info-details__value",children:null===(n=s.submission.evaluationResult)||void 0===n?void 0:null===(t=n.stats)||void 0===t?void 0:t.game_mode})]})}),(0,a.jsx)("div",{className:"col-12",children:(0,a.jsxs)("div",{className:"player-info-details__item",children:[(0,a.jsx)("h6",{className:"player-info-details__title",children:"Difficulty:"}),(0,a.jsx)("div",{className:"player-info-details__value",children:c.n9[j.Z.isNotNull(null===(r=s.submission.evaluationResult)||void 0===r?void 0:null===(o=r.stats)||void 0===o?void 0:o.difficulty)?null===(d=s.submission.evaluationResult)||void 0===d?void 0:null===(u=d.stats)||void 0===u?void 0:u.difficulty:3]})]})}),(0,a.jsx)("div",{className:"col-12",children:(0,a.jsxs)("div",{className:"player-info-details__item",children:[(0,a.jsx)("h6",{className:"player-info-details__title",children:"Status:"}),(0,a.jsx)("div",{className:"player-info-details__value",children:j.Z.getSubmissionStatusLabel(A)})]})}),(0,a.jsx)("div",{className:"col-12",children:(0,a.jsxs)("div",{className:"player-info-details__item",children:[(0,a.jsx)("h6",{className:"player-info-details__title",children:"Image:"}),(0,a.jsx)("div",{className:"player-info-details__value",children:s.submission.manifest.image})]})})]})})})})]}),(0,a.jsxs)("div",{className:"col-12 col-xl-6",children:[(0,a.jsxs)("h5",{className:"headline",children:["Submission Result",(0,a.jsx)("span",{className:"line"})]}),(0,a.jsx)("div",{className:"row",children:(0,a.jsx)("div",{className:"col-12",children:(0,a.jsx)("div",{className:"player-info-details-console",children:(0,a.jsxs)("div",{className:"row",children:[(0,a.jsx)("div",{className:"col-12",children:(0,a.jsxs)("div",{className:"player-info-details__item",children:[(0,a.jsx)("h6",{className:"player-info-details__title",children:"Score:"}),(0,a.jsx)("div",{className:"player-info-details__value",children:null===(m=s.submission.evaluationResult)||void 0===m?void 0:m.mean_score})]})}),(0,a.jsx)("div",{className:"col-12",children:(0,a.jsxs)("div",{className:"player-info-details__item",children:[(0,a.jsx)("h6",{className:"player-info-details__title",children:"Episodes Cumulative Rewards:"}),j.Z.isArray(null===(v=s.submission.evaluationResult)||void 0===v?void 0:v.cumulative_reward)||(0,a.jsx)("div",{className:"player-info-details__value",children:null===(h=s.submission.evaluationResult)||void 0===h?void 0:h.cumulative_reward}),j.Z.isArray(null===(x=s.submission.evaluationResult)||void 0===x?void 0:x.cumulative_reward)&&(0,a.jsx)("div",{className:"player-info-details__value array",children:null===(f=s.submission.evaluationResult)||void 0===f?void 0:null===(N=f.cumulative_reward)||void 0===N?void 0:N.map(function(s,e){return(0,a.jsx)("div",{className:"episode",children:"Episode "+(e+1)+": "+s})})})]})}),(0,a.jsx)("div",{className:"col-12",children:(0,a.jsxs)("div",{className:"player-info-details__item",children:[(0,a.jsx)("h6",{className:"player-info-details__title",children:"Environment Min/Max Cumulative Reward"}),(0,a.jsx)("div",{className:"player-info-details__value",children:null===(p=s.submission.evaluationResult)||void 0===p?void 0:null===(g=p.min_max_reward)||void 0===g?void 0:g.join("/")})]})}),(0,a.jsx)("div",{className:"col-12",children:(0,a.jsxs)("div",{className:"player-info-details__item",children:[(0,a.jsx)("h6",{className:"player-info-details__title",children:"Average Cumulative Reward:"}),(0,a.jsx)("div",{className:"player-info-details__value",children:null===(b=s.submission.evaluationResult)||void 0===b?void 0:b.mean_cumulative_reward})]})}),(0,a.jsx)("div",{className:"col-12",children:(0,a.jsxs)("div",{className:"player-info-details__item",children:[(0,a.jsx)("h6",{className:"player-info-details__title",children:"Cumulative Reward STD:"}),(0,a.jsx)("div",{className:"player-info-details__value",children:null===(_=s.submission.evaluationResult)||void 0===_?void 0:_.std_cumulative_reward})]})})]})})})})]})]})}function A(s){var e,i,l,d,u,v=j.Z.getResponsiveImageUrl,h=s.id,g=(0,o.useRef)(!1),A=(0,t.Z)((0,o.useState)(),2),y=A[0],w=A[1],S=(0,t.Z)((0,o.useState)(),2),R=S[0],C=S[1],E=(0,t.Z)((0,o.useState)(),2),I=E[0],Z=E[1],D=(0,t.Z)((0,o.useState)(null),2),L=D[0],U=D[1],G=o.useContext(c.Il);(0,o.useEffect)(function(){return U(v(b).src),window.addEventListener("resize",function(){return U(v(b).src)}),function(){return window.removeEventListener("resize",function(){return U(v(b).src)})}},[]),(0,o.useEffect)(function(){var s,e=(s=(0,n.Z)(function(){var s;return(0,r.__generator)(this,function(e){switch(e.label){case 0:if(j.Z.showSpinner(),g.current=!0,!h)return[3,5];s=null,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,G.api.api().v1alpha1SubmissionsRetrieve({id:h})];case 2:return w(s=e.sent()),[3,4];case 3:return e.sent(),console.log("Submission not found."),[3,4];case 4:return s?Z(k(s)):location.href="/",[3,6];case 5:location.href="/",e.label=6;case 6:return g.current=!1,j.Z.hideSpinner(3e3),[2]}})}),function(){return s.apply(this,arguments)});g.current||e()},[h,G.api]),(0,o.useEffect)(function(){var s;(s=(0,n.Z)(function(){var s;return(0,r.__generator)(this,function(e){switch(e.label){case 0:if(!(y&&y.user))return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,G.api.api().v1alpha1UsersRetrieve({id:y.user})];case 2:return(s=e.sent())&&C(s),[3,4];case 3:return e.sent(),[3,4];case 4:return[2]}})}),function(){return s.apply(this,arguments)})()},[null==y?void 0:y.user]);var k=function(s){var e,i;if(null===(e=s.evaluationResult)||void 0===e?void 0:null===(i=e.stats)||void 0===i?void 0:i.gameId){var a=c.bs.filter(function(e){var i,a;return e.id===(null===(i=s.evaluationResult)||void 0===i?void 0:null===(a=i.stats)||void 0===a?void 0:a.gameId)})[0];return a&&a.coverImage&&a.coverImage.path,a&&a.bannerImage&&a.bannerImage.path,a}return null};return R?(0,a.jsx)("div",{className:"submission-wrapper",style:{backgroundImage:L?"url(".concat(L,")"):"none"},children:(0,a.jsxs)("div",{className:"container",children:[y&&R&&(0,a.jsxs)("div",{className:"player-info-wrapper",children:[(0,a.jsx)("a",{href:"/profile/"+R.username,className:"profile-avatar",children:(0,a.jsx)("div",{className:"profile-avatar-img",children:(0,a.jsx)(N.Z,{id:R.avatar})})}),"failed"!=j.Z.getSubmissionStatus(y.status)&&(0,a.jsx)("div",{className:"player-info-details",children:(null==I?void 0:I.bannerImage)&&(0,a.jsx)("div",{className:"row",children:(0,a.jsx)("div",{className:"col-12",children:(0,a.jsx)(x(),{src:null==I?void 0:I.bannerImage.image,title:I.bannerImage.name,className:"game-banner",alt:I.bannerImage.name})})})}),"failed"==j.Z.getSubmissionStatus(y.status)&&(0,a.jsx)("div",{className:"player-submissions submission-failed",children:(0,a.jsx)(_,{submission:y,profile:R,game:I})})]}),y&&"failed"!=j.Z.getSubmissionStatus(y.status)&&(0,a.jsxs)("div",{className:"player-submissions",children:[(0,a.jsxs)("div",{className:"row",children:[(0,a.jsxs)("div",{className:"col-12 order-2 col-lg-4 order-lg-1 col-xl-3 ",children:[(0,a.jsxs)("h5",{className:"headline",children:["Unlocked Achievements",(0,a.jsx)("span",{className:"line"})]}),(0,a.jsx)(f,{submission:y})]}),(0,a.jsx)("div",{className:"col-12 order-1 col-lg-8 col-xl-9 order-lg-2",children:(0,a.jsx)(_,{submission:y,profile:R,game:I})})]}),(0,a.jsxs)("div",{className:"row",children:[(0,a.jsxs)("div",{className:"col-12 col-xl-6",children:[(0,a.jsxs)("h5",{className:"headline",children:["Submission Details",(0,a.jsx)("span",{className:"line"})]}),(0,a.jsx)(m,{submission:y})]}),(null===(e=y.evaluationResult)||void 0===e?void 0:e.message)&&(0,a.jsxs)("div",{className:"col-12 col-xl-6",children:[(0,a.jsxs)("h5",{className:"headline",children:["Logs",(0,a.jsx)("span",{className:"line"})]}),(0,a.jsx)("div",{className:"submission-logs code-console",id:"submission-settings",children:(0,a.jsx)("pre",{className:"code",children:null===(i=y.evaluationResult)||void 0===i?void 0:null===(l=i.message)||void 0===l?void 0:l.join("\n")})})]})]})]}),y&&"composed"==y.status&&(null===(d=y.compositionResult)||void 0===d?void 0:d.id)&&(0,a.jsx)(p,{id:null===(u=y.compositionResult)||void 0===u?void 0:u.id.toString()}),y&&"failed"==j.Z.getSubmissionStatus(y.status)&&(0,a.jsx)("div",{className:"player-submissions",children:(0,a.jsxs)("div",{className:"col-12",children:[(0,a.jsxs)("h5",{className:"headline",children:["Submission Details",(0,a.jsx)("span",{className:"line"})]}),(0,a.jsx)(m,{submission:y})]})})]})}):(0,a.jsx)("div",{children:"Loading..."})}function y(){var s=(0,l.useRouter)().query.id;return s?(0,a.jsx)(A,{id:parseInt(s)}):null}}},function(s){s.O(0,[774,888,179],function(){return s(s.s=36708)}),_N_E=s.O()}]);